!function(){"use strict";function t(t,e){return{require:"ngModel",scope:{ngModel:"=",slug:"=",postId:"="},link:function(s,n,o,a){n.on("blur",function(){var n=a.$modelValue;n&&0!=n.length&&e.checkSlug(n,s.postId).success(function(e){e.slug&&t(function(){s.slug=e.slug})}).error(function(t){})})}}}function e(t){return{restrict:"E",templateUrl:"/assets/templates/editor/tags.html",scope:{postTags:"=tags"},link:function(e,s,n){e.inputtedTag="",e.journalTags=[],e.suggestedTags=[],e.tags=[],e.showSuggestions=!1,e.addTag=function(t){e.addToPostTag(t)},e.addToPostTag=function(t){for(var s in e.postTags)if(e.postTags[s].name==t)return;e.showSuggestions=!1,e.postTags.push({name:t}),e.inputtedTag="",e.setupSuggestionTags()},e.initialize=function(){t.getTags().success(function(t){t.tags&&(e.journalTags=t.tags,e.setupSuggestionTags())})},e.inputYourTag=function(t){e.showSuggestions=!0,console.log(e.suggestedTags.length),13==t.which&&(t.preventDefault(),e.inputtedTag.length>0&&e.addToPostTag(e.inputtedTag)),e.inputtedTag.length<0&&(e.showSuggestions=!1)},e.setupSuggestionTags=function(){if(e.suggestedTags=e.journalTags,e.postTags)for(var t in e.postTags)for(var s in e.suggestedTags)e.postTags[t].name==e.suggestedTags[s].name&&e.suggestedTags.splice(s,1)},e.removePostTag=function(t){var s=e.postTags.indexOf(t);e.postTags.splice(s,1),e.suggestedTags.push(t)},e.initialize()}}}angular.module("journal.component.editor").directive("checkPostSlug",["$timeout","EditorService",t]).directive("tagInput",["EditorService",e])}(),function(){"use strict";function t(t,e){return{restrict:"AE",scope:{journalMarkdown:"=",counter:"="},link:function(s,n,o){var a=function(){var t=0,e=n.text().replace(/^\s\s*/,"").replace(/\s\s*$/,"");e.length>0&&(t=e.match(/[^\s]+/g).length),s.counter=t};if(o.journalMarkdown)s.$watch("journalMarkdown",function(s){var o=s?t(e.makeHtml(s)):"";n.html(o),a()});else{var g=t(e.makeHtml(n.text()));n.html(g),a()}}}}angular.module("journal.shared.markdownConverter").directive("journalMarkdown",["$sanitize","MarkdownConverter",t])}();